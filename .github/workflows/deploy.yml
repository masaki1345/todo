# on:
#   push:
#     branches:
#       - master
# name: Deploy
# jobs:
#   FTP-Deploy-Action:
#     name: FTP-Deploy-Action
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@master
#       - name: FTP-Deploy-Action
#         uses: SamKirkland/FTP-Deploy-Action@2.0.0
#         env:
#           FTP_SERVER: ${{ secrets.FTP_SERVER }}
#           FTP_USERNAME: ${{ secrets.FTP_USERNAME }}
#           FTP_PASSWORD: ${{ secrets.FTP_PASSWORD }}
#           LOCAL_DIR: ./
#           REMOTE_DIR: /http://todotest.xsrv.jp/public_html/


name: Production Deploy

on:                       # トリガーの設定
  release:                # リリースイベント時に実行
    types: [published]    # ブランチの指定
      
jobs:
  FTP-Deploy-Action:
    name: FTP-Deploy-Action   # ジョブの名前
    runs-on: ubuntu-latest    # 仮想環境の指定

    steps:
        - uses: actions/checkout@v2   # チェックアウトアクション（https://github.com/actions/checkout）
        - name: FTP-Deploy-Action
            uses: SamKirkland/FTP-Deploy-Action@4.2.0   # FTPアップロードアクション（https://github.com/SamKirkland/FTP-Deploy-Action）
            with:
                server: ${{ secrets.PROD_SERVER }}        # FTPのサーバーアドレス
                username: ${{ secrets.PROD_USERNAME }}    # FTPのユーザー名名
                password: ${{ secrets.PROD_PASSWORD }}    # FTPのパスワード
                local-dir: ./src/                         # アップロードしたいファイルのパス、この場合srcディレクトリ内をアップロード対象としている
                server-dir: /https://webftp-sv14703.xserver.jp/   # アップロード先のリモートパス
